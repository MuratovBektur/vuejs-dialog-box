(function(O,b){typeof exports=="object"&&typeof module<"u"?module.exports=b(require("vue")):typeof define=="function"&&define.amd?define(["vue"],b):(O=typeof globalThis<"u"?globalThis:O||self,O.VueDialogBox=b(O.Vue))})(this,function(O){"use strict";var b=(t=>(t.ALERT="alert",t.PROMPT="prompt",t.CONFIRM="confirm",t))(b||{}),E=(t=>(t.MAIN="main",t.CLOSE="close",t.CONFIG="config",t))(E||{}),it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W={},Et={get exports(){return W},set exports(t){W=t}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function c(r,i,f){this.fn=r,this.context=i,this.once=f||!1}function v(r,i,f,s,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var d=new c(f,s||r,p),h=n?n+i:i;return r._events[h]?r._events[h].fn?r._events[h]=[r._events[h],d]:r._events[h].push(d):(r._events[h]=d,r._eventsCount++),r}function m(r,i){--r._eventsCount===0?r._events=new o:delete r._events[i]}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var i=[],f,s;if(this._eventsCount===0)return i;for(s in f=this._events)e.call(f,s)&&i.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(f)):i},l.prototype.listeners=function(i){var f=n?n+i:i,s=this._events[f];if(!s)return[];if(s.fn)return[s.fn];for(var p=0,d=s.length,h=new Array(d);p<d;p++)h[p]=s[p].fn;return h},l.prototype.listenerCount=function(i){var f=n?n+i:i,s=this._events[f];return s?s.fn?1:s.length:0},l.prototype.emit=function(i,f,s,p,d,h){var x=n?n+i:i;if(!this._events[x])return!1;var a=this._events[x],T=arguments.length,R,_;if(a.fn){switch(a.once&&this.removeListener(i,a.fn,void 0,!0),T){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,f),!0;case 3:return a.fn.call(a.context,f,s),!0;case 4:return a.fn.call(a.context,f,s,p),!0;case 5:return a.fn.call(a.context,f,s,p,d),!0;case 6:return a.fn.call(a.context,f,s,p,d,h),!0}for(_=1,R=new Array(T-1);_<T;_++)R[_-1]=arguments[_];a.fn.apply(a.context,R)}else{var re=a.length,z;for(_=0;_<re;_++)switch(a[_].once&&this.removeListener(i,a[_].fn,void 0,!0),T){case 1:a[_].fn.call(a[_].context);break;case 2:a[_].fn.call(a[_].context,f);break;case 3:a[_].fn.call(a[_].context,f,s);break;case 4:a[_].fn.call(a[_].context,f,s,p);break;default:if(!R)for(z=1,R=new Array(T-1);z<T;z++)R[z-1]=arguments[z];a[_].fn.apply(a[_].context,R)}}return!0},l.prototype.on=function(i,f,s){return v(this,i,f,s,!1)},l.prototype.once=function(i,f,s){return v(this,i,f,s,!0)},l.prototype.removeListener=function(i,f,s,p){var d=n?n+i:i;if(!this._events[d])return this;if(!f)return m(this,d),this;var h=this._events[d];if(h.fn)h.fn===f&&(!p||h.once)&&(!s||h.context===s)&&m(this,d);else{for(var x=0,a=[],T=h.length;x<T;x++)(h[x].fn!==f||p&&!h[x].once||s&&h[x].context!==s)&&a.push(h[x]);a.length?this._events[d]=a.length===1?a[0]:a:m(this,d)}return this},l.prototype.removeAllListeners=function(i){var f;return i?(f=n?n+i:i,this._events[f]&&m(this,f)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(Et);const M=W,wt=new M,Ct=new M,xt=new M,Tt=new M,st={mainEventEmitter:wt,alertEmitter:Ct,promptEmitter:xt,confirmEmitter:Tt},{mainEventEmitter:I}=st,At=O.extend({data(){return{type:null,eventEmitter:I,DialogType:b,form:{alert:{title:"This is alert",okText:"Ok"},prompt:{title:"Write something",okText:"Yes",cancelText:"No",text:"",placeholder:""},confirm:{title:"Are you sure?",okText:"Yes",cancelText:"No"}}}},mounted(){this.disableScroll(),I.on(E.MAIN,({eventEmitter:t,type:e})=>{if(I!==this.eventEmitter)throw"close another dialog box";this.eventEmitter=t,this.type=e,this.subscribeEvents()})},beforeDestroy(){this.onDestroy()},methods:{onDestroy(){this.enableScroll(),this.form.prompt.text=""},subscribeEvents(){this.eventEmitter.on(E.CONFIG,t=>{if(!(!t||!this.type))for(let e in t){const n=t[e];n&&(this.form[this.type][e]=n)}}),this.eventEmitter.on(E.CLOSE,()=>{this.type=null,this.eventEmitter=I})},disableScroll(){document.body.style.overflowY="hidden"},enableScroll(){document.body.style.overflowY=""},onConfirm(){let t;this.type===b.PROMPT&&(t=this.form.prompt.text),this.eventEmitter.emit("confirm",t),this.onDestroy()},onCancel(){this.eventEmitter.emit("cancel"),this.onDestroy()}}}),oe="";function Rt(t,e,n,o,c,v,m,l){var r=typeof t=="function"?t.options:t;e&&(r.render=e,r.staticRenderFns=n,r._compiled=!0),o&&(r.functional=!0),v&&(r._scopeId="data-v-"+v);var i;if(m?(i=function(p){p=p||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!p&&typeof __VUE_SSR_CONTEXT__<"u"&&(p=__VUE_SSR_CONTEXT__),c&&c.call(this,p),p&&p._registeredComponents&&p._registeredComponents.add(m)},r._ssrRegister=i):c&&(i=l?function(){c.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:c),i)if(r.functional){r._injectStyles=i;var f=r.render;r.render=function(d,h){return i.call(h),f(d,h)}}else{var s=r.beforeCreate;r.beforeCreate=s?[].concat(s,i):[i]}return{exports:t,options:r}}var Ot=function(){var e=this,n=e._self._c;return e._self._setupProxy,e.type?n("div",{staticClass:"confirm-modal"},[n("div",{staticClass:"confirm-modal__content"},[e.type===e.DialogType.ALERT?[n("div",{staticClass:"confirm-modal__title"},[e._v(" "+e._s(e.form.alert.title)+" ")]),n("div",{staticClass:"confirm-modal__btn-container"},[n("button",{staticClass:"confirm-modal__btn confirm-modal__btn_center confirm-modal__btn_active",on:{click:e.onConfirm}},[e._v(" "+e._s(e.form.alert.okText)+" ")])])]:e.type===e.DialogType.PROMPT?[n("div",{staticClass:"confirm-modal__title"},[e._v(" "+e._s(e.form.prompt.title)+" ")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.prompt.text,expression:"form.prompt.text"}],staticClass:"confirm-modal__input",attrs:{type:"text",placeholder:e.form.prompt.placeholder},domProps:{value:e.form.prompt.text},on:{input:function(o){o.target.composing||e.$set(e.form.prompt,"text",o.target.value)}}})]),n("div",{staticClass:"confirm-modal__btn-container"},[n("button",{staticClass:"confirm-modal__btn",class:{"confirm-modal__btn_active":e.form.prompt.text},on:{click:e.onConfirm}},[e._v(" "+e._s(e.form.prompt.okText)+" ")]),n("button",{staticClass:"confirm-modal__btn confirm-modal__btn_error",on:{click:e.onCancel}},[e._v(" "+e._s(e.form.prompt.cancelText)+" ")])])]:e.type===e.DialogType.CONFIRM?[n("div",{staticClass:"confirm-modal__title"},[e._v(" "+e._s(e.form.confirm.title)+" ")]),n("div",{staticClass:"confirm-modal__btn-container"},[n("button",{staticClass:"confirm-modal__btn",on:{click:e.onConfirm}},[e._v(" "+e._s(e.form.confirm.okText)+" ")]),n("button",{staticClass:"confirm-modal__btn confirm-modal__btn_active",on:{click:e.onCancel}},[e._v(" "+e._s(e.form.confirm.cancelText)+" ")])])]:e._e()],2)]):e._e()},Pt=[],jt=Rt(At,Ot,Pt,!1,null,"4c97a5fd",null,null);const ft=jt.exports;function St(){const t=document.createElement("div");return document.body.appendChild(t),t}function kt(t,e,n){const o=St();new t({parent:e,render:c=>c(n)}).$mount(o)}var Y={},Lt={get exports(){return Y},set exports(t){Y=t}},G={},Ft={get exports(){return G},set exports(t){G=t}},at=H;function H(t){w.length||D(),w[w.length]=t}var w=[],D,C=0,$t=1024;function ct(){for(;C<w.length;){var t=C;if(C=C+1,w[t].call(),C>$t){for(var e=0,n=w.length-C;e<n;e++)w[e]=w[e+C];w.length-=C,C=0}}w.length=0,C=0}var ut=typeof it<"u"?it:self,lt=ut.MutationObserver||ut.WebKitMutationObserver;typeof lt=="function"?D=Nt(ct):D=pt(ct),H.requestFlush=D;function Nt(t){var e=1,n=new lt(t),o=document.createTextNode("");return n.observe(o,{characterData:!0}),function(){e=-e,o.data=e}}function pt(t){return function(){var n=setTimeout(c,0),o=setInterval(c,50);function c(){clearTimeout(n),clearInterval(o),t()}}}H.makeRequestCallFromTimer=pt;var zt=at;function q(){}var P=null,j={};function Mt(t){try{return t.then}catch(e){return P=e,j}}function It(t,e){try{return t(e)}catch(n){return P=n,j}}function Dt(t,e,n){try{t(e,n)}catch(o){return P=o,j}}var S=g;function g(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("Promise constructor's argument is not a function");this._x=0,this._y=0,this._z=null,this._A=null,t!==q&&mt(t,this)}g._B=null,g._C=null,g._D=q,g.prototype.then=function(t,e){if(this.constructor!==g)return qt(this,t,e);var n=new g(q);return B(this,new ht(t,e,n)),n};function qt(t,e,n){return new t.constructor(function(o,c){var v=new g(q);v.then(o,c),B(t,new ht(e,n,v))})}function B(t,e){for(;t._y===3;)t=t._z;if(g._B&&g._B(t),t._y===0){if(t._x===0){t._x=1,t._A=e;return}if(t._x===1){t._x=2,t._A=[t._A,e];return}t._A.push(e);return}Bt(t,e)}function Bt(t,e){zt(function(){var n=t._y===1?e.onFulfilled:e.onRejected;if(n===null){t._y===1?K(e.promise,t._z):k(e.promise,t._z);return}var o=It(n,t._z);o===j?k(e.promise,P):K(e.promise,o)})}function K(t,e){if(e===t)return k(t,new TypeError("A promise cannot be resolved with itself."));if(e&&(typeof e=="object"||typeof e=="function")){var n=Mt(e);if(n===j)return k(t,P);if(n===t.then&&e instanceof g){t._y=3,t._z=e,X(t);return}else if(typeof n=="function"){mt(n.bind(e),t);return}}t._y=1,t._z=e,X(t)}function k(t,e){t._y=2,t._z=e,g._C&&g._C(t,e),X(t)}function X(t){if(t._x===1&&(B(t,t._A),t._A=null),t._x===2){for(var e=0;e<t._A.length;e++)B(t,t._A[e]);t._A=null}}function ht(t,e,n){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=n}function mt(t,e){var n=!1,o=Dt(t,function(c){n||(n=!0,K(e,c))},function(c){n||(n=!0,k(e,c))});!n&&o===j&&(n=!0,k(e,P))}var Ut=S;Ut.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(o){setTimeout(function(){throw o},0)})};var Z=S;Z.prototype.finally=function(t){return this.then(function(e){return Z.resolve(t()).then(function(){return e})},function(e){return Z.resolve(t()).then(function(){throw e})})};var u=S,Wt=A(!0),Yt=A(!1),Gt=A(null),Ht=A(void 0),Kt=A(0),Xt=A("");function A(t){var e=new u(u._D);return e._y=1,e._z=t,e}u.resolve=function(t){if(t instanceof u)return t;if(t===null)return Gt;if(t===void 0)return Ht;if(t===!0)return Wt;if(t===!1)return Yt;if(t===0)return Kt;if(t==="")return Xt;if(typeof t=="object"||typeof t=="function")try{var e=t.then;if(typeof e=="function")return new u(e.bind(t))}catch(n){return new u(function(o,c){c(n)})}return A(t)};var L=function(t){return typeof Array.from=="function"?(L=Array.from,Array.from(t)):(L=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(t))};u.all=function(t){var e=L(t);return new u(function(n,o){if(e.length===0)return n([]);var c=e.length;function v(l,r){if(r&&(typeof r=="object"||typeof r=="function"))if(r instanceof u&&r.then===u.prototype.then){for(;r._y===3;)r=r._z;if(r._y===1)return v(l,r._z);r._y===2&&o(r._z),r.then(function(s){v(l,s)},o);return}else{var i=r.then;if(typeof i=="function"){var f=new u(i.bind(r));f.then(function(s){v(l,s)},o);return}}e[l]=r,--c===0&&n(e)}for(var m=0;m<e.length;m++)v(m,e[m])})};function J(t){return{status:"fulfilled",value:t}}function _t(t){return{status:"rejected",reason:t}}function Zt(t){if(t&&(typeof t=="object"||typeof t=="function")){if(t instanceof u&&t.then===u.prototype.then)return t.then(J,_t);var e=t.then;if(typeof e=="function")return new u(e.bind(t)).then(J,_t)}return J(t)}u.allSettled=function(t){return u.all(L(t).map(Zt))},u.reject=function(t){return new u(function(e,n){n(t)})},u.race=function(t){return new u(function(e,n){L(t).forEach(function(o){u.resolve(o).then(e,n)})})},u.prototype.catch=function(t){return this.then(null,t)};function vt(t){if(typeof AggregateError=="function")return new AggregateError(t,"All promises were rejected");var e=new Error("All promises were rejected");return e.name="AggregateError",e.errors=t,e}u.any=function(e){return new u(function(n,o){var c=L(e),v=!1,m=[];function l(i){v||(v=!0,n(i))}function r(i){m.push(i),m.length===c.length&&o(vt(m))}c.length===0?o(vt(m)):c.forEach(function(i){u.resolve(i).then(l,r)})})};var dt=at,U=[],Q=[],Jt=dt.makeRequestCallFromTimer(Qt);function Qt(){if(Q.length)throw Q.shift()}var Vt=V;function V(t){var e;U.length?e=U.pop():e=new yt,e.task=t,dt(e)}function yt(){this.task=null}yt.prototype.call=function(){try{this.task.call()}catch(t){V.onerror?V.onerror(t):(Q.push(t),Jt())}finally{this.task=null,U[U.length]=this}};var F=S,tt=Vt;F.denodeify=function(t,e){return typeof e=="number"&&e!==1/0?te(t,e):ee(t)};var gt="function (err, res) {if (err) { rj(err); } else { rs(res); }}";function te(t,e){for(var n=[],o=0;o<e;o++)n.push("a"+o);var c=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([gt]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],c)(F,t)}function ee(t){for(var e=Math.max(t.length-1,3),n=[],o=0;o<e;o++)n.push("a"+o);var c=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+gt+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(v,m){return"case "+m+":res = fn.call("+["self"].concat(n.slice(0,m)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],c)(F,t)}F.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n=typeof e[e.length-1]=="function"?e.pop():null,o=this;try{return t.apply(this,arguments).nodeify(n,o)}catch(c){if(n===null||typeof n>"u")return new F(function(v,m){m(c)});tt(function(){n.call(o,c)})}}},F.prototype.nodeify=function(t,e){if(typeof t!="function")return this;this.then(function(n){tt(function(){t.call(e,null,n)})},function(n){tt(function(){t.call(e,n)})})};var y=S;y.enableSynchronous=function(){y.prototype.isPending=function(){return this.getState()==0},y.prototype.isFulfilled=function(){return this.getState()==1},y.prototype.isRejected=function(){return this.getState()==2},y.prototype.getValue=function(){if(this._y===3)return this._z.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._z},y.prototype.getReason=function(){if(this._y===3)return this._z.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._z},y.prototype.getState=function(){return this._y===3?this._z.getState():this._y===-1||this._y===-2?0:this._y}},y.disableSynchronous=function(){y.prototype.isPending=void 0,y.prototype.isFulfilled=void 0,y.prototype.isRejected=void 0,y.prototype.getValue=void 0,y.prototype.getReason=void 0,y.prototype.getState=void 0},function(t){t.exports=S}(Ft),function(t){t.exports=G}(Lt);const et=bt(Y),{mainEventEmitter:nt,alertEmitter:rt,promptEmitter:$,confirmEmitter:N}=st;function ot(t,e,n,o){t.emit(E.MAIN,{eventEmitter:e,type:n}),e.emit("config",o)}const ne={alert:t=>(ot(nt,rt,b.ALERT,t),new et(e=>{try{rt.on("confirm",()=>{rt.emit(E.CLOSE),e(!0)})}catch(n){console.error(n)}})),prompt:t=>(ot(nt,$,b.PROMPT,t),new et(e=>{try{$.on("confirm",n=>{$.emit(E.CLOSE),e(n??"")}),$.on("cancel",()=>{$.emit(E.CLOSE),e(!1)})}catch(n){console.error(n)}})),confirm:t=>(ot(nt,N,b.CONFIRM,t),new et(e=>{try{N.on("confirm",()=>{N.emit(E.CLOSE),e(!0)}),N.on("cancel",()=>{N.emit(E.CLOSE),e(!1)})}catch(n){console.error(n)}}))};return{install(t){let e=!1;Object.defineProperty(t.prototype,"$dialogBox",{get:function(){const n=this;if(n instanceof t){const o=n.$root;e||(kt(t,o,ft),e=!0)}return ne}}),t.component("vue-dialog-box",ft)}}});
