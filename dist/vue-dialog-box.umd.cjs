(function(M,O){typeof exports=="object"&&typeof module<"u"?module.exports=O(require("vue")):typeof define=="function"&&define.amd?define(["vue"],O):(M=typeof globalThis<"u"?globalThis:M||self,M.VueDialogBox=O(M.Vue))})(this,function(M){"use strict";var O=(s=>(s.ALERT="alert",s.PROMPT="prompt",s.CONFIRM="confirm",s))(O||{}),A=(s=>(s.MAIN="main",s.CLOSE="close",s.CONFIG="config",s))(A||{}),X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J={},ht={get exports(){return J},set exports(s){J=s}};(function(s){var r=Object.prototype.hasOwnProperty,o="~";function m(){}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(o=!1));function x(a,c,d){this.fn=a,this.context=c,this.once=d||!1}function L(a,c,d,v,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var b=new x(d,v||a,h),_=o?o+c:c;return a._events[_]?a._events[_].fn?a._events[_]=[a._events[_],b]:a._events[_].push(b):(a._events[_]=b,a._eventsCount++),a}function E(a,c){--a._eventsCount===0?a._events=new m:delete a._events[c]}function p(){this._events=new m,this._eventsCount=0}p.prototype.eventNames=function(){var c=[],d,v;if(this._eventsCount===0)return c;for(v in d=this._events)r.call(d,v)&&c.push(o?v.slice(1):v);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},p.prototype.listeners=function(c){var d=o?o+c:c,v=this._events[d];if(!v)return[];if(v.fn)return[v.fn];for(var h=0,b=v.length,_=new Array(b);h<b;h++)_[h]=v[h].fn;return _},p.prototype.listenerCount=function(c){var d=o?o+c:c,v=this._events[d];return v?v.fn?1:v.length:0},p.prototype.emit=function(c,d,v,h,b,_){var T=o?o+c:c;if(!this._events[T])return!1;var l=this._events[T],P=arguments.length,S,y;if(l.fn){switch(l.once&&this.removeListener(c,l.fn,void 0,!0),P){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,d),!0;case 3:return l.fn.call(l.context,d,v),!0;case 4:return l.fn.call(l.context,d,v,h),!0;case 5:return l.fn.call(l.context,d,v,h,b),!0;case 6:return l.fn.call(l.context,d,v,h,b,_),!0}for(y=1,S=new Array(P-1);y<P;y++)S[y-1]=arguments[y];l.fn.apply(l.context,S)}else{var et=l.length,R;for(y=0;y<et;y++)switch(l[y].once&&this.removeListener(c,l[y].fn,void 0,!0),P){case 1:l[y].fn.call(l[y].context);break;case 2:l[y].fn.call(l[y].context,d);break;case 3:l[y].fn.call(l[y].context,d,v);break;case 4:l[y].fn.call(l[y].context,d,v,h);break;default:if(!S)for(R=1,S=new Array(P-1);R<P;R++)S[R-1]=arguments[R];l[y].fn.apply(l[y].context,S)}}return!0},p.prototype.on=function(c,d,v){return L(this,c,d,v,!1)},p.prototype.once=function(c,d,v){return L(this,c,d,v,!0)},p.prototype.removeListener=function(c,d,v,h){var b=o?o+c:c;if(!this._events[b])return this;if(!d)return E(this,b),this;var _=this._events[b];if(_.fn)_.fn===d&&(!h||_.once)&&(!v||_.context===v)&&E(this,b);else{for(var T=0,l=[],P=_.length;T<P;T++)(_[T].fn!==d||h&&!_[T].once||v&&_[T].context!==v)&&l.push(_[T]);l.length?this._events[b]=l.length===1?l[0]:l:E(this,b)}return this},p.prototype.removeAllListeners=function(c){var d;return c?(d=o?o+c:c,this._events[d]&&E(this,d)):(this._events=new m,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=o,p.EventEmitter=p,s.exports=p})(ht);const U=J,_t=new U,mt=new U,pt=new U,yt=new U,at={mainEventEmitter:_t,alertEmitter:mt,promptEmitter:pt,confirmEmitter:yt},{mainEventEmitter:V}=at,bt=M.extend({data(){return{type:null,eventEmitter:V,DialogType:O,form:{alert:{title:"This is alert",okText:"Ok"},prompt:{title:"Write something",okText:"Yes",cancelText:"No",text:"",placeholder:""},confirm:{title:"Are you sure?",okText:"Yes",cancelText:"No"}}}},mounted(){this.disableScroll(),V.on(A.MAIN,({eventEmitter:s,type:r})=>{if(V!==this.eventEmitter)throw"close another dialog box";this.eventEmitter=s,this.type=r,this.subscribeEvents()})},beforeDestroy(){this.onDestroy()},methods:{onDestroy(){this.enableScroll(),this.form.prompt.text=""},subscribeEvents(){this.eventEmitter.on(A.CONFIG,s=>{if(!(!s||!this.type))for(let r in s){const o=s[r];o&&(this.form[this.type][r]=o)}}),this.eventEmitter.on(A.CLOSE,()=>{this.type=null,this.eventEmitter=V})},disableScroll(){document.body.style.overflowY="hidden"},enableScroll(){document.body.style.overflowY=""},onConfirm(){let s;this.type===O.PROMPT&&(s=this.form.prompt.text),this.eventEmitter.emit("confirm",s),this.onDestroy()},onCancel(){this.eventEmitter.emit("cancel"),this.onDestroy()}}}),Vt="";function gt(s,r,o,m,x,L,E,p){var a=typeof s=="function"?s.options:s;r&&(a.render=r,a.staticRenderFns=o,a._compiled=!0),m&&(a.functional=!0),L&&(a._scopeId="data-v-"+L);var c;if(E?(c=function(h){h=h||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!h&&typeof __VUE_SSR_CONTEXT__<"u"&&(h=__VUE_SSR_CONTEXT__),x&&x.call(this,h),h&&h._registeredComponents&&h._registeredComponents.add(E)},a._ssrRegister=c):x&&(c=p?function(){x.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:x),c)if(a.functional){a._injectStyles=c;var d=a.render;a.render=function(b,_){return c.call(_),d(b,_)}}else{var v=a.beforeCreate;a.beforeCreate=v?[].concat(v,c):[c]}return{exports:s,options:a}}var wt=function(){var r=this,o=r._self._c;return r._self._setupProxy,r.type?o("div",{staticClass:"confirm-modal"},[o("div",{staticClass:"confirm-modal__content"},[r.type===r.DialogType.ALERT?[o("div",{staticClass:"confirm-modal__title"},[r._v(" "+r._s(r.form.alert.title)+" ")]),o("div",{staticClass:"confirm-modal__btn-container"},[o("button",{staticClass:"confirm-modal__btn confirm-modal__btn_center confirm-modal__btn_active",on:{click:r.onConfirm}},[r._v(" "+r._s(r.form.alert.okText)+" ")])])]:r.type===r.DialogType.PROMPT?[o("div",{staticClass:"confirm-modal__title"},[r._v(" "+r._s(r.form.prompt.title)+" ")]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:r.form.prompt.text,expression:"form.prompt.text"}],staticClass:"confirm-modal__input",attrs:{type:"text",placeholder:r.form.prompt.placeholder},domProps:{value:r.form.prompt.text},on:{input:function(m){m.target.composing||r.$set(r.form.prompt,"text",m.target.value)}}})]),o("div",{staticClass:"confirm-modal__btn-container"},[o("button",{staticClass:"confirm-modal__btn",class:{"confirm-modal__btn_active":r.form.prompt.text},on:{click:r.onConfirm}},[r._v(" "+r._s(r.form.prompt.okText)+" ")]),o("button",{staticClass:"confirm-modal__btn confirm-modal__btn_error",on:{click:r.onCancel}},[r._v(" "+r._s(r.form.prompt.cancelText)+" ")])])]:r.type===r.DialogType.CONFIRM?[o("div",{staticClass:"confirm-modal__title"},[r._v(" "+r._s(r.form.confirm.title)+" ")]),o("div",{staticClass:"confirm-modal__btn-container"},[o("button",{staticClass:"confirm-modal__btn",on:{click:r.onConfirm}},[r._v(" "+r._s(r.form.confirm.okText)+" ")]),o("button",{staticClass:"confirm-modal__btn confirm-modal__btn_active",on:{click:r.onCancel}},[r._v(" "+r._s(r.form.confirm.cancelText)+" ")])])]:r._e()],2)]):r._e()},Et=[],Ct=gt(bt,wt,Et,!1,null,"4c97a5fd",null,null);const ft=Ct.exports;function xt(){const s=document.createElement("div");return document.body.appendChild(s),s}function Tt(s,r,o){const m=xt();new s({parent:r,render:x=>x(o)}).$mount(m)}function Ot(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var H={},At={get exports(){return H},set exports(s){H=s}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(s,r){(function(o,m){s.exports=m()})(X,function(){function o(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function m(t){return typeof t=="function"}var x=void 0;Array.isArray?x=Array.isArray:x=function(t){return Object.prototype.toString.call(t)==="[object Array]"};var L=x,E=0,p=void 0,a=void 0,c=function(e,n){N[E]=e,N[E+1]=n,E+=2,E===2&&(a?a(F):j())};function d(t){a=t}function v(t){c=t}var h=typeof window<"u"?window:void 0,b=h||{},_=b.MutationObserver||b.WebKitMutationObserver,T=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",l=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function P(){return function(){return process.nextTick(F)}}function S(){return typeof p<"u"?function(){p(F)}:R()}function y(){var t=0,e=new _(F),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function et(){var t=new MessageChannel;return t.port1.onmessage=F,function(){return t.port2.postMessage(0)}}function R(){var t=setTimeout;return function(){return t(F,1)}}var N=new Array(1e3);function F(){for(var t=0;t<E;t+=2){var e=N[t],n=N[t+1];e(n),N[t]=void 0,N[t+1]=void 0}E=0}function St(){try{var t=Function("return this")().require("vertx");return p=t.runOnLoop||t.runOnContext,S()}catch{return R()}}var j=void 0;T?j=P():_?j=y():l?j=et():h===void 0&&typeof Ot=="function"?j=St():j=R();function nt(t,e){var n=this,i=new this.constructor(D);i[z]===void 0&&vt(i);var f=n._state;if(f){var u=arguments[f-1];c(function(){return ut(f,i,u,n._result)})}else ot(n,i,t,e);return i}function rt(t){var e=this;if(t&&typeof t=="object"&&t.constructor===e)return t;var n=new e(D);return W(n,t),n}var z=Math.random().toString(36).substring(2);function D(){}var I=void 0,G=1,$=2;function Rt(){return new TypeError("You cannot resolve a promise with itself")}function kt(){return new TypeError("A promises callback cannot return that same promise.")}function Lt(t,e,n,i){try{t.call(e,n,i)}catch(f){return f}}function Mt(t,e,n){c(function(i){var f=!1,u=Lt(n,e,function(g){f||(f=!0,e!==g?W(i,g):k(i,g))},function(g){f||(f=!0,w(i,g))},"Settle: "+(i._label||" unknown promise"));!f&&u&&(f=!0,w(i,u))},t)}function Nt(t,e){e._state===G?k(t,e._result):e._state===$?w(t,e._result):ot(e,void 0,function(n){return W(t,n)},function(n){return w(t,n)})}function lt(t,e,n){e.constructor===t.constructor&&n===nt&&e.constructor.resolve===rt?Nt(t,e):n===void 0?k(t,e):m(n)?Mt(t,e,n):k(t,e)}function W(t,e){if(t===e)w(t,Rt());else if(o(e)){var n=void 0;try{n=e.then}catch(i){w(t,i);return}lt(t,e,n)}else k(t,e)}function Ft(t){t._onerror&&t._onerror(t._result),it(t)}function k(t,e){t._state===I&&(t._result=e,t._state=G,t._subscribers.length!==0&&c(it,t))}function w(t,e){t._state===I&&(t._state=$,t._result=e,c(Ft,t))}function ot(t,e,n,i){var f=t._subscribers,u=f.length;t._onerror=null,f[u]=e,f[u+G]=n,f[u+$]=i,u===0&&t._state&&c(it,t)}function it(t){var e=t._subscribers,n=t._state;if(e.length!==0){for(var i=void 0,f=void 0,u=t._result,g=0;g<e.length;g+=3)i=e[g],f=e[g+n],i?ut(n,i,f,u):f(u);t._subscribers.length=0}}function ut(t,e,n,i){var f=m(n),u=void 0,g=void 0,q=!0;if(f){try{u=n(i)}catch(K){q=!1,g=K}if(e===u){w(e,kt());return}}else u=i;e._state!==I||(f&&q?W(e,u):q===!1?w(e,g):t===G?k(e,u):t===$&&w(e,u))}function jt(t,e){try{e(function(i){W(t,i)},function(i){w(t,i)})}catch(n){w(t,n)}}var dt=0;function Dt(){return dt++}function vt(t){t[z]=dt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function It(){return new Error("Array Methods must be provided an Array")}var $t=function(){function t(e,n){this._instanceConstructor=e,this.promise=new e(D),this.promise[z]||vt(this.promise),L(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),this.length===0?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),this._remaining===0&&k(this.promise,this._result))):w(this.promise,It())}return t.prototype._enumerate=function(n){for(var i=0;this._state===I&&i<n.length;i++)this._eachEntry(n[i],i)},t.prototype._eachEntry=function(n,i){var f=this._instanceConstructor,u=f.resolve;if(u===rt){var g=void 0,q=void 0,K=!1;try{g=n.then}catch(ct){K=!0,q=ct}if(g===nt&&n._state!==I)this._settledAt(n._state,i,n._result);else if(typeof g!="function")this._remaining--,this._result[i]=n;else if(f===C){var st=new f(D);K?w(st,q):lt(st,n,g),this._willSettleAt(st,i)}else this._willSettleAt(new f(function(ct){return ct(n)}),i)}else this._willSettleAt(u(n),i)},t.prototype._settledAt=function(n,i,f){var u=this.promise;u._state===I&&(this._remaining--,n===$?w(u,f):this._result[i]=f),this._remaining===0&&k(u,this._result)},t.prototype._willSettleAt=function(n,i){var f=this;ot(n,void 0,function(u){return f._settledAt(G,i,u)},function(u){return f._settledAt($,i,u)})},t}();function qt(t){return new $t(this,t).promise}function Bt(t){var e=this;return L(t)?new e(function(n,i){for(var f=t.length,u=0;u<f;u++)e.resolve(t[u]).then(n,i)}):new e(function(n,i){return i(new TypeError("You must pass an array to race."))})}function Yt(t){var e=this,n=new e(D);return w(n,t),n}function Gt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Wt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var C=function(){function t(e){this[z]=Dt(),this._result=this._state=void 0,this._subscribers=[],D!==e&&(typeof e!="function"&&Gt(),this instanceof t?jt(this,e):Wt())}return t.prototype.catch=function(n){return this.then(null,n)},t.prototype.finally=function(n){var i=this,f=i.constructor;return m(n)?i.then(function(u){return f.resolve(n()).then(function(){return u})},function(u){return f.resolve(n()).then(function(){throw u})}):i.then(n,n)},t}();C.prototype.then=nt,C.all=qt,C.race=Bt,C.resolve=rt,C.reject=Yt,C._setScheduler=d,C._setAsap=v,C._asap=c;function Ut(){var t=void 0;if(typeof X<"u")t=X;else if(typeof self<"u")t=self;else try{t=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch{}if(n==="[object Promise]"&&!e.cast)return}t.Promise=C}return C.polyfill=Ut,C.Promise=C,C})})(At),H.polyfill();const{mainEventEmitter:Q,alertEmitter:Z,promptEmitter:B,confirmEmitter:Y}=at;function tt(s,r,o,m){s.emit(A.MAIN,{eventEmitter:r,type:o}),r.emit("config",m)}const Pt={alert:s=>(tt(Q,Z,O.ALERT,s),new Promise(r=>{try{Z.on("confirm",()=>{Z.emit(A.CLOSE),r(!0)})}catch(o){console.error(o)}})),prompt:s=>(tt(Q,B,O.PROMPT,s),new Promise(r=>{try{B.on("confirm",o=>{B.emit(A.CLOSE),r(o??"")}),B.on("cancel",()=>{B.emit(A.CLOSE),r(!1)})}catch(o){console.error(o)}})),confirm:s=>(tt(Q,Y,O.CONFIRM,s),new Promise(r=>{try{Y.on("confirm",()=>{Y.emit(A.CLOSE),r(!0)}),Y.on("cancel",()=>{Y.emit(A.CLOSE),r(!1)})}catch(o){console.error(o)}}))};return{install(s){let r=!1;Object.defineProperty(s.prototype,"$dialogBox",{get:function(){const o=this;if(o instanceof s){const m=o.$root;r||(Tt(s,m,ft),r=!0)}return Pt}}),s.component("vue-dialog-box",ft)}}});
